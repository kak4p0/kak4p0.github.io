---
---
@import "main";

/* =========================================================
   Kak4p0 Kakapo Mint/Lime Skin (Chirpy)
   Goals:
   - cleaner + less blurry (no heavy backdrop-filter)
   - stronger identity (kakapo mint/lime)
   - fix: right panel dropping to bottom on long posts
   ========================================================= */

/* ---------- Palette ---------- */
:root{
  --k-mint: #2dd4bf;          /* mint */
  --k-lime: #a3e635;          /* lime */
  --k-ink:  #0a0f12;          /* deep bg */
  --k-ink2: #0d1417;          /* secondary bg */
  --k-surface: rgba(255,255,255,.035);
  --k-surface2: rgba(255,255,255,.05);
  --k-border: rgba(255,255,255,.08);
  --k-mint-border: rgba(45,212,191,.22);
  --k-lime-border: rgba(163,230,53,.22);
}

/* ---------- Background (distinct, but calm) ---------- */
body{
  background:
    radial-gradient(900px 650px at 14% -10%, rgba(45,212,191,.12), transparent 60%),
    radial-gradient(900px 650px at 86%  10%, rgba(163,230,53,.10), transparent 60%),
    linear-gradient(180deg, var(--k-ink), var(--k-ink2));
}

/* subtle “noise” layer: adds uniqueness without blur */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,.02) 1px, transparent 1px, transparent 6px),
    repeating-linear-gradient(90deg, rgba(0,0,0,.03), rgba(0,0,0,.03) 1px, transparent 1px, transparent 8px);
  opacity: .25;
  mix-blend-mode: overlay;
}

/* ---------- Readability ---------- */
.post-content{
  line-height: 1.78;
  letter-spacing: .1px;
}
.post-content p{ margin-bottom: 1.05rem; }

/* Headings: kakapo accent bar */
.post-content h2,
.post-content h3{
  position: relative;
  padding-left: .75rem;
}
.post-content h2::before,
.post-content h3::before{
  content:"";
  position:absolute;
  left:0;
  top:.35em;
  width:.32rem;
  height: 1.1em;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(45,212,191,.9), rgba(163,230,53,.9));
  box-shadow: 0 0 16px rgba(45,212,191,.18);
}

/* Links: mint -> lime hover */
a,
.post-content a{
  color: var(--k-mint);
  text-decoration-thickness: 1px;
  text-underline-offset: 3px;
}
a:hover,
.post-content a:hover{
  color: var(--k-lime);
}

/* Selection */
::selection{ background: rgba(163,230,53,.22); }

/* ---------- Cards / Panels (less “fog”, more crisp) ---------- */
.card,
.card-wrapper,
#panel-wrapper .panel,
#core-wrapper .post,
#core-wrapper .page,
#core-wrapper .home{
  background: var(--k-surface) !important;
  border: 1px solid var(--k-border) !important;
  border-radius: 18px !important;
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}

/* Topbar: crisp line + slight tint */
#topbar-wrapper{
  background: rgba(0,0,0,.18) !important;
  border-bottom: 1px solid rgba(255,255,255,.06);
}
#topbar-wrapper a{ color: rgba(255,255,255,.78); }
#topbar-wrapper a:hover{ color: var(--k-lime); }

/* Sidebar: gradient + active glow */
#sidebar{
  background:
    radial-gradient(900px 650px at 30% 0%, rgba(45,212,191,.11), transparent 55%),
    radial-gradient(900px 650px at 70% 15%, rgba(163,230,53,.09), transparent 55%),
    linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.40));
  border-right: 1px solid rgba(255,255,255,.06);
}
#sidebar .nav-link.active{
  background: rgba(45,212,191,.14) !important;
  border: 1px solid rgba(163,230,53,.18) !important;
  box-shadow:
    0 0 0 1px rgba(45,212,191,.10) inset,
    0 12px 28px rgba(0,0,0,.35);
}

/* ---------- Tags / Chips ---------- */
.tag,
.post-tag,
#panel-wrapper .post-tag{
  border-radius: 999px !important;
  border: 1px solid rgba(45,212,191,.24) !important;
  background: rgba(45,212,191,.08) !important;
}
.tag:hover,
.post-tag:hover{
  border-color: rgba(163,230,53,.34) !important;
  background: rgba(163,230,53,.10) !important;
}

/* ---------- Code blocks (key for writeups) ---------- */
pre,
.highlight,
div.highlighter-rouge{
  background: rgba(0,0,0,.34) !important;
  border: 1px solid rgba(45,212,191,.18) !important;
  border-radius: 16px !important;
  box-shadow: 0 10px 26px rgba(0,0,0,.28);
  overflow-x: auto !important;      /* IMPORTANT: prevent layout stretching */
  max-width: 100% !important;       /* IMPORTANT: prevent right panel drop */
}
code{
  font-family: ui-monospace, "JetBrains Mono", "Cascadia Mono", "D2Coding", SFMono-Regular, Menlo, Consolas, monospace;
}

/* Long text / tables should not blow up width */
#core-wrapper,
.post-content{
  min-width: 0;                     /* IMPORTANT for flex layouts */
}
.post-content *{
  overflow-wrap: anywhere;
}
.post-content table{
  display: block;
  overflow-x: auto;
  max-width: 100%;
}
.post-content img,
.post-content video,
.post-content svg{
  max-width: 100%;
  height: auto;
}

/* ---------- Right panel stability (desktop) ----------
   If a long code/table forces the main column to exceed width,
   Bootstrap's row may wrap -> panel drops to bottom.
   Fix: force nowrap + min-width:0 (core can shrink) + fixed panel width.
   Also covers Chirpy layouts where #main-wrapper itself is .row. */
@media (min-width: 992px){
  /* Case A: #main-wrapper itself behaves like a Bootstrap row */
  #main-wrapper{
    display: flex !important;
    flex-wrap: nowrap !important;
    align-items: flex-start;
  }

  /* Case B: #main-wrapper contains the row */
  #main-wrapper > .row,
  #main-wrapper > .container > .row,
  #main-wrapper .row.flex-grow-1{
    display: flex !important;
    flex-wrap: nowrap !important;
    align-items: flex-start;
  }

  /* Critical: allow flex items to shrink even when content is long */
  #core-wrapper,
  #panel-wrapper,
  #main-wrapper > .row > *,
  #main-wrapper > .container > .row > *,
  #main-wrapper .row.flex-grow-1 > *{
    min-width: 0 !important;
  }

  /* Core takes remaining space (0-basis prevents min-content expansion) */
  #core-wrapper{
    flex: 1 1 0% !important;
    width: auto !important;
    min-width: 0 !important;
  }

  /* Panel fixed width so it never drops below */
  #panel-wrapper{
    flex: 0 0 320px !important;
    width: 320px !important;
    max-width: 320px !important;
    min-width: 320px !important;
    align-self: flex-start !important;
    margin-top: 0 !important;
  }

  /* Rouge line-number tables can still inflate min-content width */
  #core-wrapper .rouge-table{
    display: block;
    overflow-x: auto;
    max-width: 100%;
  }
}

/* Sticky TOC (Contents) */
@media (min-width: 992px){
  #toc-wrapper,
  #panel-wrapper .toc-wrapper{
    position: sticky;
    top: 5.2rem; /* topbar 아래 여백 */
  }

  /* TOC가 길어지면 내부만 스크롤 */
  #toc-wrapper{
    max-height: calc(100vh - 6.2rem);
    overflow-y: auto;
  }
}

/* Extreme one-line bash blocks: allow wrapping so layout never breaks */
@media (min-width: 992px){
  .language-bash .highlight pre,
  .language-bash pre{
    white-space: pre-wrap !important;
    overflow-wrap: anywhere !important;
    word-break: break-word !important;
  }
}
